<html>

<meta name="viewport" id="viewport"/>
<meta name="theme-color" content="#4285f4">

<style>
.drag-and-drop {
    cursor: move;
    width:120px;
    height:120px;
    position: absolute;
    z-index: 1000;
}

.drag {
    z-index: 1001;
}


.drag-and-drop-x {
    cursor: move;
    position: absolute;
    z-index: 2000;
}

.no-drag-and-drop {
    width:120px;
    height:120px;
    position: absolute;
    z-index: 1000;
}



body {
	background-color: #000000;
}

.shadow {
  box-shadow: 0 10px 25px 0 rgba(0, 0, 0, .5);
}

</style>

<script>

function sound()
{

	document.getElementById( 'monoxide' ).play() ;
	
}

</script>


<title>Monoxide Web</title>

<body id="body">


<div  style="width: 100%; height: 100vh; text-align: center;" onclick="window_load();"><img id="monoimg" style="width: 100%; height: 100vh;" src="a1.png"></div>


<div class="drag-and-drop" style=" text-align: center;" id="main">
	<img src="main.gif" class="shadow" onclick="sound();"></img>
</div>

<div class="drag-and-drop" style="display:none; width: 235px; height: 148px;" id="popupsub"><img src="popupsub.png"></div>
<div class="drag-and-drop" style="display:none; width: 400; height: 250px;" id="popup"><img src="popup.png"></div>

<div class="drag-and-drop" style="display:none; width: 30px; height: 30px;" id="cur"><img src="cur.png"></div>

<div class="drag-and-drop" style="display:none; width: 200px; height: 200px;" id="tama"><img src="tama.png"></div>


<audio  id="monoxide" style="display:none;" src="monoxide.mp3"   loop>
  <code>audio</code>
</audio>

</body>





<script>

(function(){

    var elements = document.getElementsByClassName("drag-and-drop");

    var x;
    var y;

    for(var i = 0; i < elements.length; i++) {
        elements[i].addEventListener("mousedown", mdown, false);
        elements[i].addEventListener("touchstart", mdown, false);
    }

    function mdown(e) {
    
    	sound();
    	
    	window_load();

        this.classList.add("drag");

        if(e.type === "mousedown") {
            var event = e;
        } else {
            var event = e.changedTouches[0];
        }

        x = event.pageX - this.offsetLeft;
        y = event.pageY - this.offsetTop;

        document.body.addEventListener("mousemove", mmove, false);
        document.body.addEventListener("touchmove", mmove, false);
    }

    function mmove(e) {

		document.addEventListener('touchmove', function(event) {event.preventDefault()}, { passive: false });
		
        var drag = document.getElementsByClassName("drag")[0];

        if(e.type === "mousemove") {
            var event = e;
        } else {
            var event = e.changedTouches[0];
        }

        e.preventDefault();

        drag.style.top = event.pageY - y + "px";
        drag.style.left = event.pageX - x + "px";

        drag.addEventListener("mouseup", mup, false);
        document.body.addEventListener("mouseleave", mup, false);
        drag.addEventListener("touchend", mup, false);
        document.body.addEventListener("touchleave", mup, false);
        
        document.removeEventListener('touchmove', handleTouchMove, { passive: false });

    }

    function mup(e) {
        var drag = document.getElementsByClassName("drag")[0];

        document.body.removeEventListener("mousemove", mmove, false);
        //drag.removeEventListener("mouseup", mup, false);
        //document.body.removeEventListener("touchmove", mmove, false);
        drag.removeEventListener("touchend", mup, false);

        drag.classList.remove("drag");
    }

})()




	var sW,sH,s;
	sW = window.innerWidth - 300;
	sH = window.innerHeight;
	
	let  esW;
	let  esH;

	var main = document.getElementById("main");
	main.style.display ="block";
	main.style.width = '200px'; 
	
	var maincss = 'left:' + (sW/2-50) + ';' + 'top:' + (sH/2-150) + ';';
	main.setAttribute('style',maincss);
	



var waitInt = 100;

async function window_load() {
        
        document.getElementById("tama").style.display ="block";
        
		var elements;
		elements = document.getElementById("tama");
		var curElements;
		curElements = document.getElementById("cur");
		var popupsub_elements;
		popupsub_elements = document.getElementById("popupsub");
		var popup_elements;
		popup_elements = document.getElementById("popup");
		
		var i = 1;
		var k = 0;
		var body;
		var cssBody;

		var elementsC;
		var c = 0;
		
		var l = 0;
		for(i=0;i<100;i++){
			await wait2();
			
			esW = Math.floor(Math.random() * sW-300);
			esH = Math.floor(Math.random() * sH);
			var css = 'left:' + esW + ';' + 'top:' + esH + ';';
			elements.setAttribute('style',css);
			
			esW = Math.floor(Math.random() * sW);
			esH = Math.floor(Math.random() * sH);
			css = 'left:' + esW + ';' + 'top:' + esH + ';';
			curElements.setAttribute('style',css);
			
			if(k > 100){
				esW = Math.floor(Math.random() * sW-250);
				esH = Math.floor(Math.random() * sH);
				css = 'left:' + esW + ';' + 'top:' + esH + ';';
				popupsub_elements.setAttribute('style',css);
				
				if(l==4){
				    	body = document.getElementById("body");
			                cssBody = 'transform:skew('+ Math.floor(Math.random() *10) +'deg, ' + Math.floor(Math.random() *20) + 'deg)';
			                body.setAttribute('style',cssBody);
	            } else if(l==10){
					body = document.getElementById("body");
					cssBody = 'filter: invert(1);';
					body.setAttribute('style',cssBody);
	            }
	            
			}
			
			if(k > 300){
				esW = Math.floor(Math.random() * sW-500);
				esH = Math.floor(Math.random() * sH);
				css = 'left:' + esW + ';' + 'top:' + esH + ';';
				popup_elements.setAttribute('style',css);
			}
			var imgValue = Math.floor(Math.random() * 11);
			document.getElementById("monoimg").src = "a" + imgValue + ".png";
			
			
			if((i % 2)==1){
			    body = document.getElementById("body");
	            cssBody = '';
	            body.setAttribute('style',cssBody);
			}
			
			if(i == 90){
				i = 0;
			}
			var metaThemeColor = document.querySelector("meta[name=theme-color]");
			var randomColor='#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
			metaThemeColor.setAttribute("content", randomColor);
			document.body.style.backgroundColor = randomColor;
			k = k + 1;


			elementsC = document.getElementById("c" + c);
			css = 'left:' + (esW - 150) + ';' + 'top:' + esH + ';' + 'font-size:'+ Math.floor(Math.random() *50);
			elementsC.setAttribute('style',css);
			randomColor='#'+(0x1000000+(Math.random())*0xffffff).toString(16).substr(1,6);
			elementsC.style.color = randomColor;

			c++;
		        l++;
		        
		        if(l==20){
		           l=0;   
		        }

			if(c==9){
				c=0;
			}

		}

}





function wait2 () {
    return new Promise( resolve => { setTimeout( resolve, waitInt ) } );
}
function wait4 () {
    return new Promise( resolve => { setTimeout( resolve, 3800 ) } );
}






</script>


</html>
